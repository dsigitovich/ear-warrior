# Ear Warrior MVP – Product Requirements Document (PRD)

## 1. Executive Summary

### 1.1 Product Overview
**Ear Warrior MVP** — это минимально жизнеспособная версия интерактивного веб-приложения для тренировки **мелодического слуха**, где пользователи **воспроизводят на слух реальные мелодии**, а система с помощью микрофона распознаёт их и оценивает точность исполнения.

### 1.2 Product Vision
Создать инструмент, который позволяет развивать реальный слух музыканта, приближенный к задачам “подбора на слух”, используя популярные мелодии и простой, понятный фидбек. Всё — без скучных интервалов и механических тестов.

### 1.3 Target Audience
- Новички и любители (укулеле, голос, гитара, фортепиано)
- Студенты музыкальных школ
- Самоучки, изучающие музыку на слух
- Люди, желающие "подбирать песни на слух"

---

## 2. Goals & Objectives

### 2.1 Цели MVP
- Проверить, может ли пользователь эффективно воспроизвести популярную мелодию на слух
- Дать точный, но не токсичный фидбек: какие ноты были верны
- Сохранить простоту — 1 режим, 1 фича, 20 песен
- Не нарушать авторских прав: всё воспроизводится локально, мелодии синтезированы, аудио не хранится

### 2.2 Метрики успеха
- 80% пользователей успешно воспроизводят хотя бы одну мелодию
- Среднее время сессии: > 3 минут
- Позитивный фидбек на UX
- Проверка работоспособности pitch-detection пайплайна

---

## 3. Core Features

### 3.1 Каталог мелодий
- 20 узнаваемых песен (Let It Be, Happy Birthday, Jingle Bells…)
- Каждая мелодия в JSON формате: `note + duration`
- Все мелодии транспонированы в C мажор для унификации
- Мелодии сгенерированы LLM или вручную, не взяты из оригиналов

### 3.2 Воспроизведение мелодии
- Tone.js синтезирует мелодию на стороне клиента
- Фразы длиной 3–8 нот, темп фиксированный (например, 60 bpm)
- Пользователь слушает мелодию → нажимает "повторить"

### 3.3 Распознавание через микрофон
- Микрофон захватывает аудио (Web Audio API)
- Pitchy или аналог распознаёт частоты с таймфреймом ~100мс
- Частоты переводятся в ноты (например, 261.6 Гц → C4)
- Убираются шумы, повторения, дубликаты

### 3.4 Сравнение с эталоном
- Полученная последовательность нот сравнивается с целевой
- Используется грубое выравнивание: 1:1 с допустимой погрешностью (± полтона)
- Отображается фидбек: зелёная — верная нота, красная — ошибка

### 3.5 Интерфейс
- Экран с:
  - Названием мелодии
  - Кнопкой "Слушай"
  - Кнопкой "Повтори"
  - Панелью фидбека
- Всё работает на мобильных и десктопе
- Минималистичный UI

---

## 4. Technical Architecture

### 4.1 Технологии
- **Frontend**: React 19 + Vite + TypeScript
- **Audio**: Tone.js (воспроизведение), Pitchy (распознавание)
- **State**: Zustand
- **Deployment**: GitHub Pages / Vercel

### 4.2 Безопасность и легальность
- Никакие mp3, midi, оригинальные аудиотреки не используются
- Весь звук синтезируется локально
- Все мелодии — либо public domain, либо AI-генерация
- Пользователь не загружает файлы — только работает в браузере

---

## 5. User Flow

1. Пользователь заходит на сайт
2. Выбирает мелодию (или получает случайную)
3. Слушает воспроизведение
4. Нажимает "Повторить"
5. Играет или поёт мелодию
6. Получает фидбек: какие ноты совпали
7. Может попробовать ещё раз или перейти к следующей мелодии

---

## 6. Будущие направления (не входит в MVP, но закладываются)

- Пользователь может загружать свои мелодии (YouTube, mp3, голос)
- Импорт песен из Spotify/YouTube → генерация упражнения
- Учёт ритма и выравнивание с точностью по времени
- Умный ассистент ("подбери 5 песен, где есть скачок на тритон")
- Аккаунты, прогресс, уровни сложности, leaderboard

---

## 7. Roadmap MVP (2–3 недели)

| Неделя | Этап                                     |
|--------|------------------------------------------|
| 1      | Мелодии в JSON, UI, воспроизведение       |
| 2      | Pitch detection, простое сравнение, фидбек |
| 3      | UI polishing, баги, тестирование          |

---

## 8. Заключение

Это MVP нацелен не на “тренировку слуха по учебнику”, а на **реальный музыкальный слух** — способность воспроизвести знакомую мелодию по слуху.  
Если пользователь сможет воспроизвести хотя бы 5 из 20 фраз, он уже почувствует свой прогресс.

Простой формат (JSON), клиентская обработка и узнаваемые мелодии — позволяют начать быстро, без авторских рисков и с высокой образовательной ценностью.